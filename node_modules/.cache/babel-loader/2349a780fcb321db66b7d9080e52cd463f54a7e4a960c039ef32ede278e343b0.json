{"ast":null,"code":"import _slicedToArray from\"/home/t1/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/kuplatform/admin-stage/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{BrowserRouter,Navigate,Route,Routes,useLocation}from'react-router-dom';import'./style/App.css';import ScrollTop from'./utils/scrollTop';import Header from'./components/Header/Header';import Register from'./components/Auth/Register';import Restoring from'./components/Auth/Restoring';import Shipped from'./components/Auth/Shipped';import NewPass from'./components/Auth/NewPass';import Admin from'./pages/Admin/Admin';import NotFound from'./pages/notPages/NoPages';import{useEffect,useState}from'react';import Invitation from'./pages/Invitation/Invitation';import axios from'axios';import ShippedTwo from'./components/Auth/ShippedTwo';import Statisticss from'./pages/statistics/Statistics';import Advertisers from'./pages/statistics/Advertisers/Advertisers';import InternalPage from'./pages/statistics/InternalPage/InternalPage';import Venues from'./pages/statistics/Venues';import Advertising from'./pages/statistics/Advertising/Advertising';import Auctions from'./pages/statistics/Auctions';import{AuthProvider,useAuth}from'./AuthContext';import Advertisements from'./pages/statistics/Advertisements';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),userMe=_useState2[0],setUserMe=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),userPrav=_useState4[0],setuserPrav=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),SuperUser=_useState6[0],setSuperUser=_useState6[1];var apiUrl=process.env.REACT_APP_API_URL;var loginEndpoint='/api/users_admin/me';var token=localStorage.getItem('access_token');var _useAuth=useAuth(),refreshToken=_useAuth.refreshToken;useEffect(function(){var url=\"\".concat(apiUrl).concat(loginEndpoint);axios.get(url,{headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}}).then(function(res){setUserMe(res.data.user.role);setuserPrav(res.data.user.role);setSuperUser(res.data.user.is_superuser);}).catch(function(error){if(error.response&&error.response.status===401){refreshToken();}else{}});},[]);var commonRoute=/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Route,{path:\"/admin_home\",element:/*#__PURE__*/_jsx(Admin,{})}),(userPrav.includes('admin')||SuperUser)&&/*#__PURE__*/_jsx(Route,{path:\"/invitation\",element:/*#__PURE__*/_jsx(Invitation,{userMe:userMe})}),/*#__PURE__*/_jsx(Route,{path:\"/statistics\",element:/*#__PURE__*/_jsx(Statisticss,{})}),/*#__PURE__*/_jsx(Route,{path:\"/Advertisers\",element:/*#__PURE__*/_jsx(Advertisers,{})}),(userPrav.includes('sitemoderator')||SuperUser)&&/*#__PURE__*/_jsx(Route,{path:\"/Venues\",element:/*#__PURE__*/_jsx(Venues,{})}),/*#__PURE__*/_jsx(Route,{path:\"/InternalPage\",element:/*#__PURE__*/_jsx(InternalPage,{})}),(userPrav.includes('lotmoderator')||SuperUser)&&/*#__PURE__*/_jsx(Route,{path:\"/Auctions\",element:/*#__PURE__*/_jsx(Auctions,{})}),(userPrav.includes('advmoderator')||SuperUser)&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Route,{path:\"/Advertising\",element:/*#__PURE__*/_jsx(Advertising,{})})}),(userPrav.includes('adsmoderator')||SuperUser)&&/*#__PURE__*/_jsx(Route,{path:\"/Advertisements\",element:/*#__PURE__*/_jsx(Advertisements,{})})]});return/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(ScrollTop,{}),token?/*#__PURE__*/_jsx(Header,{userPrav:userPrav,SuperUser:SuperUser}):null,/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:token?/*#__PURE__*/_jsx(Navigate,{to:\"/admin_home\"}):/*#__PURE__*/_jsx(Navigate,{to:\"/Login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/Login\",element:/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsx(Route,{path:\"/restoring\",element:/*#__PURE__*/_jsx(Restoring,{})}),/*#__PURE__*/_jsx(Route,{path:\"/shipped\",element:/*#__PURE__*/_jsx(Shipped,{})}),/*#__PURE__*/_jsx(Route,{path:\"/passwordsuccessfully\",element:/*#__PURE__*/_jsx(ShippedTwo,{})}),/*#__PURE__*/_jsx(Route,{path:\"/newpassword/:token\",element:/*#__PURE__*/_jsx(NewPass,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/404\"})}),/*#__PURE__*/_jsx(Route,{path:\"/404\",element:/*#__PURE__*/_jsx(NotFound,{})}),token&&commonRoute]})]})});}export default App;","map":{"version":3,"names":["BrowserRouter","Navigate","Route","Routes","useLocation","ScrollTop","Header","Register","Restoring","Shipped","NewPass","Admin","NotFound","useEffect","useState","Invitation","axios","ShippedTwo","Statisticss","Advertisers","InternalPage","Venues","Advertising","Auctions","AuthProvider","useAuth","Advertisements","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","userMe","setUserMe","_useState3","_useState4","userPrav","setuserPrav","_useState5","_useState6","SuperUser","setSuperUser","apiUrl","process","env","REACT_APP_API_URL","loginEndpoint","token","localStorage","getItem","_useAuth","refreshToken","url","concat","get","headers","then","res","data","user","role","is_superuser","catch","error","response","status","commonRoute","children","path","element","includes","className","to"],"sources":["/home/t1/Рабочий стол/kuplatform/admin-stage/src/App.jsx"],"sourcesContent":["import { BrowserRouter, Navigate, Route, Routes, useLocation } from 'react-router-dom';\nimport './style/App.css';\n\nimport ScrollTop from './utils/scrollTop';\nimport Header from './components/Header/Header';\nimport Register from './components/Auth/Register';\nimport Restoring from './components/Auth/Restoring';\nimport Shipped from './components/Auth/Shipped';\nimport NewPass from './components/Auth/NewPass';\nimport Admin from './pages/Admin/Admin';\nimport NotFound from './pages/notPages/NoPages';\nimport { useEffect, useState } from 'react';\nimport Invitation from './pages/Invitation/Invitation';\nimport axios from 'axios';\nimport ShippedTwo from './components/Auth/ShippedTwo';\nimport Statisticss from './pages/statistics/Statistics';\nimport Advertisers from './pages/statistics/Advertisers/Advertisers';\nimport InternalPage from './pages/statistics/InternalPage/InternalPage';\nimport Venues from './pages/statistics/Venues';\nimport Advertising from './pages/statistics/Advertising/Advertising';\nimport Auctions from './pages/statistics/Auctions';\nimport { AuthProvider, useAuth } from './AuthContext';\nimport Advertisements from './pages/statistics/Advertisements';\n\n\nfunction App() {\n\n  const [userMe, setUserMe] = useState([])\n\n  const [userPrav, setuserPrav] = useState([])\n\n  const [SuperUser, setSuperUser] = useState([])\n\n  const apiUrl = process.env.REACT_APP_API_URL;\n\n  const loginEndpoint = '/api/users_admin/me';\n\n  const token = localStorage.getItem('access_token');\n\n  const { refreshToken } = useAuth();\n\n  useEffect(() => {\n  \n      const url = `${apiUrl}${loginEndpoint}`;\n  \n          axios.get(url, {\n\n              headers: {\n                  'Content-Type': 'application/json',\n                  'Authorization': `Bearer ${token}` \n              }\n\n          })\n          .then(res => {\n\n            setUserMe(res.data.user.role)\n\n            setuserPrav(res.data.user.role)\n\n            setSuperUser(res.data.user.is_superuser)\n\n          })\n\n          .catch(error => {\n\n            if (error.response && error.response.status === 401) {\n\n              refreshToken();\n\n            } else {\n              \n            }\n              \n          });\n\n  }, []);\n\n\n  const commonRoute = (\n\n    <>\n\n          <Route path=\"/admin_home\" element={<Admin />} />\n\n          { (userPrav.includes('admin') || SuperUser ) &&  \n\n          <Route path=\"/invitation\" element={<Invitation userMe={userMe} />} />\n\n          }\n\n          <Route path='/statistics'  element={<Statisticss />} />\n\n          <Route path='/Advertisers'  element={<Advertisers />} />\n\n          { (userPrav.includes('sitemoderator') || SuperUser ) &&       \n\n          <Route path='/Venues'  element={<Venues />} />\n\n          }\n\n          <Route path='/InternalPage'  element={<InternalPage />} />\n\n          {(userPrav.includes('lotmoderator') || SuperUser ) && (\n\n             <Route path='/Auctions' element={<Auctions />} />\n\n          )}\n          \n\n          {(userPrav.includes('advmoderator') || SuperUser ) &&\n\n          <>\n\n            <Route path='/Advertising'  element={<Advertising />} />\n\n          </>  \n\n          }\n\n          {(userPrav.includes('adsmoderator') || SuperUser ) &&\n\n          <Route path='/Advertisements'  element={<Advertisements />} />\n\n          }\n          \n\n    </>\n\n  );\n\n\n  return (\n\n    <BrowserRouter>\n\n    <div className=\"app\">\n\n      <ScrollTop />\n\n      {token ? <Header userPrav={userPrav} SuperUser={SuperUser} /> : null }\n\n        <Routes>\n\n          <Route path='/'  element={ token ? <Navigate to=\"/admin_home\" /> : <Navigate to=\"/Login\" /> } />\n\n          <Route path='/Login'  element={<Register />} />\n\n          <Route path='/restoring'  element={<Restoring />} />\n\n          <Route path='/shipped'  element={<Shipped />} />\n\n          <Route path='/passwordsuccessfully'  element={<ShippedTwo />} />\n\n          <Route path='/newpassword/:token'  element={<NewPass />} />\n\n          <Route path=\"*\" element={<Navigate to=\"/404\" />} />\n\n          <Route path='/404' element={<NotFound />} />\n\n          {token && commonRoute }\n          \n\n        </Routes>\n\n    </div>\n\n    </BrowserRouter>\n  \n  );\n}\n\n\n\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}